var fetchCharts = require('../lib/fetch.js');

module.exports = function(grunt){

    grunt.task.registerTask('fetch', 'fetch and save github charts', function(){

        var done = this.async();
        
        fetchCharts('javascript', 'daily')
        .then(function(){
            return fetchCharts('php', 'daily');
        })
        .then(function(){
            return fetchCharts('html', 'daily');
        })
        .then(function(){
            return fetchCharts('css', 'daily');
        })
        .then(function(){
            return fetchCharts('javascript', 'weekly');
        })
        .then(function(){
            return fetchCharts('php', 'weekly');
        })
        .then(function(){
            return fetchCharts('html', 'weekly');
        })
        .then(function(){
            return fetchCharts('css', 'weekly');
        })
        .then(function(){
            return fetchCharts('javascript', 'monthly');
        })
        .then(function(){
            return fetchCharts('php', 'monthly');
        })
        .then(function(){
            return fetchCharts('html', 'monthly');
        })
        .then(function(){
            return fetchCharts('css', 'monthly');
        })
        .then(function(){
            done();
        });
        return
        foo.then(function(){
            console.log('mhh')
            return fetchCharts('php', 'daily')
        })
        .then(function(){
            console.log('done')
        });

    });

};
